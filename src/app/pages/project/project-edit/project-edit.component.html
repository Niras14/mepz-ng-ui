<section class="section">
  <div class="container">
    <div class="row page-content">
      <div class="col-md-12">
        <div class="d-lg-flex align-items-center mb-4 gap-3">
          <h4 class="mb-0 text-primary">Edit Project </h4>
          <div class="ms-auto">
            <a routerLink="/pages/projects/{{ projectType }}/list" class="btn btn-primary sqare-0 mt-2 mt-lg-0">
              <i class="bx bx-table"></i>Manage Projects</a>
          </div>
        </div>
        <div class="card border-top border-0 border-4 border-primary">
          <div class="card-body p-4">
            <app-loader *ngIf="loader"></app-loader>
            <form [formGroup]="addDepartment" (ngSubmit)="SaveData()" class="form-horizontal row">
              <div class="col-md-6">
                <label class="form-label">Code</label>
                <input type="text" class="form-control" name="code" formControlName="code" autocomplete="off"
                  [ngClass]="{'is-invalid': submitted && addDepartment.controls['code'].errors || addDepartment.controls['code'].errors && addDepartment.controls['code'].touched}">
                <div class="text-danger"
                  *ngIf="addDepartment.controls['code'].errors?.['required'] && addDepartment.controls['code'].touched || submitted && addDepartment.controls['code'].errors ">
                  Code is required</div>
              </div>
              <div class="col-md-6">
                <label class="form-label">Project Name</label>
                <input type="text" class="form-control" name="name" formControlName="name" autocomplete="off"
                  [ngClass]="{'is-invalid': submitted && addDepartment.controls['name'].errors || addDepartment.controls['name'].errors && addDepartment.controls['name'].touched}">
                <div class="text-danger"
                  *ngIf="addDepartment.controls['name'].errors?.['required'] && addDepartment.controls['name'].touched || submitted && addDepartment.controls['name'].errors">
                  Project name is required</div>
              </div>
              <div class="col-md-6">
                <label class="form-label">Full Project Name</label>
                <input type="text" class="form-control" name="fullName" formControlName="fullName" autocomplete="off"
                  [ngClass]="{'is-invalid': submitted && addDepartment.controls['fullName'].errors|| addDepartment.controls['fullName'].errors && addDepartment.controls['fullName'].touched}">
                <div class="text-danger"
                  *ngIf="addDepartment.controls['fullName'].errors?.['required'] && addDepartment.controls['fullName'].touched || submitted && addDepartment.controls['fullName'].errors">
                  Full project name is required</div>
              </div>
              <div class="col-md-6">
                <label class="form-label">Client/Owner</label>
                <input type="text" class="form-control" name="clientOwner" formControlName="clientOwner"
                  autocomplete="off"
                  [ngClass]="{'is-invalid': submitted && addDepartment.controls['clientOwner'].errors || addDepartment.controls['clientOwner'].errors && addDepartment.controls['clientOwner'].touched}">
                <div class="text-danger"
                  *ngIf="addDepartment.controls['clientOwner'].errors?.['required'] && addDepartment.controls['clientOwner'].touched || submitted && addDepartment.controls['clientOwner'].errors">
                  Client/Owner is required</div>
              </div>
              <div class="col-md-6">
                <label class="form-label">Contract No</label>
                <input type="text" class="form-control" name="contractNo" formControlName="contractNo"
                  autocomplete="off"
                  [ngClass]="{'is-invalid': submitted && addDepartment.controls['contractNo'].errors || addDepartment.controls['contractNo'].errors && addDepartment.controls['contractNo'].touched || submitted && addDepartment.controls['contractNo'].errors }">
                <div class="invalid-feedback">
                  Please enter a valid contract number.
                </div>
              </div>
              <div class="col-md-6">
                <label class="form-label">No. of Beds</label>
                <input type="text" class="form-control" name="noOfBeds" formControlName="noOfBeds" autocomplete="off"
                  [ngClass]="{'is-invalid': submitted && addDepartment.controls['noOfBeds'].errors || addDepartment.controls['noOfBeds'].errors && addDepartment.controls['noOfBeds'].touched}">
                <div class="invalid-feedback" *ngIf="submitted && addDepartment.controls['noOfBeds'].errors">
                  Please enter a valid number of beds.
                </div>
              </div>
              <div class="col-md-6">
                <label class="form-label">Classification</label>
                <input type="text" class="form-control" name="classification" formControlName="classification"
                  autocomplete="off"
                  [ngClass]="{'is-invalid': submitted && addDepartment.controls['classification'].errors || addDepartment.controls['classification'].errors && addDepartment.controls['classification'].touched}">
                <div class="invalid-feedback">
                  Please enter a valid classification.
                </div>
              </div>
              <div class="col-md-6">
                <label class="form-label">Project Type</label>
                <input type="text" class="form-control" name="type" formControlName="type" autocomplete="off"
                  [ngClass]="{'is-invalid': submitted && addDepartment.controls['type'].errors || addDepartment.controls['type'].errors && addDepartment.controls['type'].touched}">
                <div class="invalid-feedback">
                  Please enter a valid project type.
                </div>
              </div>
              <div class="col-md-6">
                <label class="form-label">Company</label>
                <div class="form-group">
                  <select formControlName="comp" class="form-control" [ngClass]="{'is-invalid': submitted && addDepartment.controls['comp'].errors?.['required'] ||  addDepartment.controls['comp'].touched && submitted && addDepartment.controls['comp'].errors}">
                    <option selected value="">Select Company</option>
                    <option value="RADIOTHERAPY SPECIALIST HOSPITAL">LIKAS NUCLEAR AND RADIOTHERAPY SPECIALIST HOSPITAL
                    </option>
                    <option value="HSS JV QATTA">HSS JV QATTA</option>
                    <option value="HEALTH SOLUTION">HEALTH SOLUTION (SE ASIA) SDN BHD</option>
                  </select>
                  <div *ngIf="submitted && addDepartment.controls['comp'].errors?.['required'] ||  addDepartment.controls['comp'].touched || submitted && addDepartment.controls['comp'].errors" class="text-danger">
                      <div *ngIf="addDepartment.controls['comp'].errors?.['required']">Please select company</div>
                  </div>
              </div>

              </div>
              <!-- <inputid="datetimepicker"> -->
              <div class="col-md-6">
                <label class="form-label">Date Initiated Proposal</label>
                <input type="text" class="form-control" name="dateInitiatedProposal"
                  formControlName="dateInitiatedProposal" autocomplete="off"
                  [ngClass]="{'is-invalid': submitted && addDepartment.controls['dateInitiatedProposal'].errors || addDepartment.controls['dateInitiatedProposal'].errors && addDepartment.controls['dateInitiatedProposal'].touched}">
                <div class="text-danger" *ngIf="submitted && addDepartment.controls['dateInitiatedProposal'].errors || addDepartment.controls['dateInitiatedProposal'].errors?.['required'] && addDepartment.controls['dateInitiatedProposal'].touched"> Date Initiated Proposal is required
                </div>
              </div>
              <div class="col-md-6">
                <label class="form-label">Proposed Facility Completion Date</label>
                <input type="text" class="form-control" name="proposedFacilityCompletionDate"
                  formControlName="proposedFacilityCompletionDate" autocomplete="off"
                  [ngClass]="{'is-invalid': submitted && addDepartment.controls['proposedFacilityCompletionDate'].errors || addDepartment.controls['proposedFacilityCompletionDate'].errors && addDepartment.controls['proposedFacilityCompletionDate'].touched}">
                <div class="text-danger"
                  *ngIf="submitted && addDepartment.controls['proposedFacilityCompletionDate'].errors || addDepartment.controls['proposedFacilityCompletionDate'].errors?.['required'] && addDepartment.controls['proposedFacilityCompletionDate'].touched">
                  Proposed Facility Completion Date is required
                </div>
              </div>
              <div class="col-md-6">
                <label class="form-label">Signature 1</label>
                <input type="text" class="form-control" name="signature1" formControlName="signature1"
                  autocomplete="off"
                  [ngClass]="{'is-invalid': submitted && addDepartment.controls['signature1'].errors || addDepartment.controls['signature1'].errors && addDepartment.controls['signature1'].touched}">
                <div class="text-danger"
                  *ngIf=" submitted && addDepartment.controls['signature1'].errors || addDepartment.controls['signature1'].errors?.['required'] && addDepartment.controls['signature1'].touched">Signature 1 is required
                </div>
              </div>
              <div class="col-md-6">
                <label class="form-label">Signature 2</label>
                <input type="text" class="form-control" name="signature2" formControlName="signature2"
                  autocomplete="off"
                  [ngClass]="{'is-invalid': submitted && addDepartment.controls['signature2'].errors || addDepartment.controls['signature2'].errors && addDepartment.controls['signature2'].touched}">
                <div class="text-danger"
                  *ngIf="submitted && addDepartment.controls['signature2'].errors || addDepartment.controls['signature2'].errors?.['required'] && addDepartment.controls['signature2'].touched">Signature 2 is required
                </div>
              </div>
              <div class="col-md-6">
                <label class="form-label">Address 1</label>
                <input type="text" class="form-control" name="address1" formControlName="address1" autocomplete="off"
                  [ngClass]="{'is-invalid': submitted && addDepartment.controls['address1'].errors || addDepartment.controls['address1'].errors && addDepartment.controls['address1'].touched}">
                <div class="text-danger"
                  *ngIf="submitted && addDepartment.controls['address1'].errors || addDepartment.controls['address1'].errors?.['required'] && addDepartment.controls['address1'].touched">Address 1 is required
                </div>
              </div>
              <div class="row mt-4">
                <h4>Location</h4>
                <hr>
                <div class="col-md-6">
                  <label class="form-label">Address 1</label>
                  <input type="text" class="form-control" name="address1" formControlName="address1" autocomplete="off"
                    [ngClass]="{'is-invalid': submitted && addDepartment.controls['address1'].errors || addDepartment.controls['address1'].errors && addDepartment.controls['address1'].touched}">
                  <div class="text-danger"
                    *ngIf="submitted && addDepartment.controls['address1'].errors || addDepartment.controls['address1'].errors?.['required'] && addDepartment.controls['address1'].touched">Address 1 is required
                  </div>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Address 2</label>
                  <input type="text" class="form-control" name="address2" formControlName="address2" autocomplete="off"
                    [ngClass]="{'is-invalid': submitted && addDepartment.controls['address2'].errors || addDepartment.controls['address2'].errors && addDepartment.controls['address2'].touched}">
                  <div class="text-danger"
                    *ngIf="submitted && addDepartment.controls['address2'].errors || addDepartment.controls['address2'].errors?.['required'] && addDepartment.controls['address2'].touched">Address 2 is required
                  </div>
                </div>
                <div class="col-md-6">
                  <label class="form-label">City</label>
                  <input type="text" class="form-control" name="city" formControlName="city" autocomplete="off"
                    [ngClass]="{'is-invalid': submitted && addDepartment.controls['city'].errors || addDepartment.controls['city'].errors && addDepartment.controls['city'].touched}">
                  <div class="text-danger"
                    *ngIf="submitted && addDepartment.controls['city'].errors || addDepartment.controls['city'].errors?.['required'] && addDepartment.controls['city'].touched">City is required
                  </div>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Postal/Zip</label>
                  <input type="text" class="form-control" name="postalZip" formControlName="postalZip"
                    autocomplete="off"
                    [ngClass]="{'is-invalid': submitted && addDepartment.controls['postalZip'].errors || addDepartment.controls['postalZip'].errors && addDepartment.controls['postalZip'].touched}">
                  <div class="text-danger"
                    *ngIf="submitted && addDepartment.controls['postalZip'].errors || addDepartment.controls['postalZip'].errors?.['required'] && addDepartment.controls['postalZip'].touched">Postal/Zip is required
                  </div>
                </div>
                <div class="col-md-6">
                  <label class="form-label">State/Prov.</label>
                  <input type="text" class="form-control" name="state" formControlName="state" autocomplete="off"
                    [ngClass]="{'is-invalid': submitted && addDepartment.controls['state'].errors || addDepartment.controls['state'].errors && addDepartment.controls['state'].touched}">
                  <div class="text-danger"
                    *ngIf="submitted && addDepartment.controls['state'].errors || addDepartment.controls['state'].errors?.['required'] && addDepartment.controls['state'].touched">State/Prov is required
                  </div>
                </div>
                <div class="col-md-6">
                  <label class="form-label">Country</label>
                  <input type="text" class="form-control" name="country" formControlName="country" autocomplete="off"
                    [ngClass]="{'is-invalid': submitted && addDepartment.controls['country'].errors || addDepartment.controls['country'].errors && addDepartment.controls['country'].touched}">
                  <div class="text-danger"
                    *ngIf="submitted && addDepartment.controls['country'].errors || addDepartment.controls['country'].errors?.['required'] && addDepartment.controls['country'].touched">Country is required
                  </div>
                </div>
                <div class="col-md-6">
                  <h4 class="mt-4">Currency Base Settings</h4>
                  <hr>
                  <table class="table table-condensed table-striped">
                    <thead>
                      <tr>
                        <th>Code</th>
                        <th>Description</th>
                        <th>Symbol</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngFor="let currency of currencies">
                        <td>{{ currency.currencyCode }}</td>
                        <td>{{ currency.currencyDescription }}</td>
                        <td>{{ currency.currencySymbol }}</td>
                      </tr>
                    </tbody>
                  </table>
                  <p><small>This settings is a one time settings only. Any changes cannot be made once you add and
                      save.</small></p>
                  <button type="button" class="btn btn-info btn-sm" (click)="openModal(modalContent)"
                    fdprocessedid="o595l">Add</button>
                </div>
              </div>
              <div class="col-md-6 text-center mt-3">
                <button type="submit" class="btn btn-primary px-4 me-3" fdprocessedid="hipqpp">Save</button>
                <a routerLink="/pages/projects/{{ projectType }}/list"><i class="btn btn-secondary px-5">Back</i></a>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Modal Popup -->
<ng-template #modalContent let-modal>
  <div class="modal-header">
    <h4 class="modaltitle" id="modal-title">Add Currency Settings</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="modal.dismiss('Cross click')"></button>
  </div>
  <div class="modal-body">
    <div class="form-group">
      <label for="currencyDropdown">Currency:</label>
      <select id="currencyDropdown" class="form-control" [(ngModel)]="selectedCurrency">
        <option value="">-Select Currency-</option>
        <option value="BAHT">THAI BAHT (B)</option>
        <option value="HK$">HONGKONG DOLLAR ($)</option>
        <option value="MYR">MALAYSIA RINGGIT ($)</option>
        <option value="PHP">PHILIPPINE PESO (P)</option>
        <option value="RIAL">SAUDI RIAL (R)</option>
        <option value="RUPE">INDIAN RUPEE (R)</option>
        <option value="US$">US DOLLAR ($)</option>
      </select>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-primary" (click)="addCurrency()">Add</button>
    <button type="button" class="btn btn-secondary" (click)="modal.dismiss('Close click')">Close</button>
  </div>
</ng-template>
